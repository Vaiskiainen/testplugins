(function(d,n,o,s,u){"use strict";const{Text:v,View:w}=n.ReactNative;let c;const y=function(){const r=o.findByProps("getVoiceStates","getVoiceState"),a=o.findByProps("getCurrentUser"),[e,f]=n.React.useState(null),[t,l]=n.React.useState(Date.now());if(n.React.useEffect(function(){if(!r||!a)return;const i=function(){const C=a.getCurrentUser();if(!C)return;const g=r.getVoiceState(C.id);g?.channelId&&!e&&f(Date.now()),!g?.channelId&&e&&f(null)};return r.addChangeListener(i),i(),function(){return r.removeChangeListener(i)}},[e]),n.React.useEffect(function(){if(!e)return;const i=setInterval(function(){return l(Date.now())},1e3);return function(){return clearInterval(i)}},[e]),!e)return null;const h=Math.floor((t-e)/1e3),R=Math.floor(h/60),p=h%60;return n.React.createElement(v,{style:{color:"#fff",fontSize:14,marginLeft:8,opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.3)",paddingHorizontal:6,paddingVertical:2,borderRadius:4,overflow:"hidden"}},`${R}:${p<10?"0":""}${p}`)};var H={onLoad(){const r=o.findByName("ChannelHeader",!1),a=o.findByProps("ChannelHeader"),e=function(f,t){if(!t?.props?.children)return t;const l=Array.isArray(t.props.children)?[...t.props.children]:[t.props.children];return l.push(n.React.createElement(w,{style:{flexDirection:"row",alignItems:"center"}},n.React.createElement(y))),t.props.children=l,t};r?.default?(c=s.after("default",r,e),u.showToast("VoiceTime: Patched ChannelHeader (default)")):a?.ChannelHeader?(c=s.after("ChannelHeader",a,e),u.showToast("VoiceTime: Patched ChannelHeader (named)")):(console.log("[voiceTime] Could not find ChannelHeader"),u.showToast("VoiceTime: Could not find ChannelHeader"))},onUnload(){c&&c()}};return d.default=H,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.ui.toasts);
