(function(s,r,o,f,a){"use strict";const{Text:T,View:y}=r.ReactNative;let l;const w=function(){const e=o.findByProps("getVoiceStates","getVoiceState"),c=o.findByProps("getCurrentUser"),[n,i]=r.React.useState(null),[h,t]=r.React.useState(Date.now());if(r.React.useEffect(function(){if(!e||!c)return;const u=function(){const p=c.getCurrentUser();if(!p)return;const C=e.getVoiceState(p.id);C?.channelId&&!n&&i(Date.now()),!C?.channelId&&n&&i(null)};return e.addChangeListener(u),u(),function(){return e.removeChangeListener(u)}},[n]),r.React.useEffect(function(){if(!n)return;const u=setInterval(function(){return t(Date.now())},1e3);return function(){return clearInterval(u)}},[n]),!n)return null;const d=Math.floor((h-n)/1e3),v=Math.floor(d/60),g=d%60;return r.React.createElement(T,{style:{color:"#fff",fontSize:14,marginLeft:8,opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.3)",paddingHorizontal:6,paddingVertical:2,borderRadius:4,overflow:"hidden"}},`${v}:${g<10?"0":""}${g}`)};var V={onLoad(){try{a.showToast("VoiceTime: Plugin loading..."),console.log("VoiceTime: Plugin loading...");const e=o.findByName("ChannelHeader",!1),c=o.findByProps("ChannelHeader"),n=o.findByDisplayName("ChannelHeader",!1),i=function(h,t){if(!t?.props?.children)return t;const d=Array.isArray(t.props.children)?[...t.props.children]:[t.props.children];return d.push(r.React.createElement(y,{style:{flexDirection:"row",alignItems:"center"}},r.React.createElement(w))),t.props.children=d,t};e?.default?(l=f.after("default",e,i),a.showToast("VoiceTime: Patched ChannelHeader (default)")):c?.ChannelHeader?(l=f.after("ChannelHeader",c,i),a.showToast("VoiceTime: Patched ChannelHeader (named)")):n?(l=f.after("default",n,i),a.showToast("VoiceTime: Patched ChannelHeader (display name)")):(console.log("[voiceTime] Could not find ChannelHeader"),a.showToast("VoiceTime: Could not find ChannelHeader"))}catch(e){console.error("VoiceTime Error:",e),a.showToast(`VoiceTime Error: ${e.message}`)}},onUnload(){l&&l()}};return s.default=V,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.ui.toasts);
