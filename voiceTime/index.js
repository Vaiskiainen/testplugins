(function(p,n,d,C,u){"use strict";const{Text:h,View:T}=n.ReactNative;let s=[];const v=function(){const t=d.findByProps("getVoiceStates","getVoiceStateForUser"),c=d.findByProps("getCurrentUser"),[o,f]=n.React.useState(null),[g,y]=n.React.useState(Date.now());if(n.React.useEffect(function(){if(u.showToast("VoiceTimer: Component Mounted!"),!t||!c){u.showToast("VoiceTime: Stores not found");return}const e=function(){const r=c.getCurrentUser();if(!r)return;const w=t.getVoiceStateForUser(r.id);w?.channelId&&!o&&f(Date.now()),!w?.channelId&&o&&f(null)};return t.addChangeListener(e),e(),function(){return t.removeChangeListener(e)}},[]),n.React.useEffect(function(){if(!o)return;const e=setInterval(function(){return y(Date.now())},1e3);return function(){return clearInterval(e)}},[o]),!o)return n.React.createElement(h,{style:{color:"red",backgroundColor:"yellow"}}," VT: Idle ");const l=Math.floor((g-o)/1e3),a=Math.floor(l/60),i=l%60;return n.React.createElement(h,{style:{color:"#fff",fontSize:14,marginLeft:8,opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.3)",paddingHorizontal:6,paddingVertical:2,borderRadius:4,overflow:"hidden"}},`${a}:${i<10?"0":""}${i}`)};var R={onLoad(){try{u.showToast("VoiceTime: Plugin loading v5..."),s=[];const t=function(a){return function(i,e){if(!e)return e;e.props||(e.props={});const r=Array.isArray(e.props.children)?[...e.props.children]:e.props.children?[e.props.children]:[];return r.push(n.React.createElement(T,{style:{flexDirection:"row",alignItems:"center"}},n.React.createElement(h,{style:{color:"lime",fontSize:10,marginRight:4}},`[${a}]`),n.React.createElement(v))),e.props.children=r,e}},c=function(a,i,e="default"){if(!a)return!1;const r=e==="default"?a.default:a[e];return r?.prototype?.render?(s.push(C.after("render",r.prototype,t(`${i}.proto`))),u.showToast(`Patched ${i} (prototype)`),!0):typeof r=="function"?(s.push(C.after(e,a,t(i))),u.showToast(`Patched ${i} (functional)`),!0):!1},o=d.findByName("ChannelHeader",!1),f=d.findByProps("ChannelHeader"),g=d.findByName("MobileChannelHeader",!1),y=d.findByName("Header",!1);let l=!1;c(o,"ChannelHeader")&&(l=!0),c(f,"ChannelHeaderProps","ChannelHeader")&&(l=!0),c(g,"MobileChannelHeader")&&(l=!0),l||c(y,"Header")}catch(t){console.error("VoiceTime Error:",t),u.showToast(`VoiceTime Error: ${t.message}`)}},onUnload(){s.forEach(function(t){return t()})}};return p.default=R,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.ui.toasts);
