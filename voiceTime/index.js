(function(h,r,o,u,a){"use strict";const{Text:p,View:C}=r.ReactNative;let i=[];const V=function(){const e=o.findByProps("getVoiceStates","getVoiceState"),c=o.findByProps("getCurrentUser"),[n,d]=r.React.useState(null),[s,T]=r.React.useState(Date.now());if(r.React.useEffect(function(){if(a.showToast("VoiceTimer: Component Mounted!"),!e||!c){a.showToast("VoiceTime: Stores not found");return}const l=function(){const y=c.getCurrentUser();if(!y)return;const w=e.getVoiceState(y.id);w?.channelId&&!n&&d(Date.now()),!w?.channelId&&n&&d(null)};return e.addChangeListener(l),l(),function(){return e.removeChangeListener(l)}},[n]),r.React.useEffect(function(){if(!n)return;const l=setInterval(function(){return T(Date.now())},1e3);return function(){return clearInterval(l)}},[n]),!n)return r.React.createElement(p,{style:{color:"red",backgroundColor:"yellow"}}," VT: Idle ");const t=Math.floor((s-n)/1e3),f=Math.floor(t/60),g=t%60;return r.React.createElement(p,{style:{color:"#fff",fontSize:14,marginLeft:8,opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.3)",paddingHorizontal:6,paddingVertical:2,borderRadius:4,overflow:"hidden"}},`${f}:${g<10?"0":""}${g}`)};var v={onLoad(){try{a.showToast("VoiceTime: Plugin loading v3..."),i=[];const e=function(T,t){if(!t?.props?.children)return t;const f=Array.isArray(t.props.children)?[...t.props.children]:[t.props.children];return f.push(r.React.createElement(C,{style:{flexDirection:"row",alignItems:"center",zIndex:999}},r.React.createElement(V))),t.props.children=f,t},c=o.findByName("ChannelHeader",!1),n=o.findByProps("ChannelHeader"),d=o.findByDisplayName("ChannelHeader",!1);c?.default?(i.push(u.after("default",c,e)),a.showToast("VoiceTime: Patched ChannelHeader (default)")):n?.ChannelHeader?(i.push(u.after("ChannelHeader",n,e)),a.showToast("VoiceTime: Patched ChannelHeader (named)")):d&&(i.push(u.after("default",d,e)),a.showToast("VoiceTime: Patched ChannelHeader (display name)"));const s=o.findByName("Topic",!1);s?.default&&(i.push(u.after("default",s,e)),a.showToast("VoiceTime: Patched Topic"))}catch(e){console.error("VoiceTime Error:",e),a.showToast(`VoiceTime Error: ${e.message}`)}},onUnload(){i.forEach(function(e){return e()})}};return h.default=v,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.ui.toasts);
