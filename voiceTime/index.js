(function(p,n,d,l,r){"use strict";const{Text:g,View:w}=n.ReactNative;let i=[];const H=function(){const e=d.findByProps("getVoiceStates","getVoiceState"),c=d.findByProps("getCurrentUser"),[a,u]=n.React.useState(null),[f,h]=n.React.useState(Date.now());if(n.React.useEffect(function(){if(r.showToast("VoiceTimer: Component Mounted!"),!e||!c){r.showToast("VoiceTime: Stores not found");return}const o=function(){const y=c.getCurrentUser();if(!y)return;const T=e.getVoiceState(y.id);T?.channelId&&!a&&u(Date.now()),!T?.channelId&&a&&u(null)};return e.addChangeListener(o),o(),function(){return e.removeChangeListener(o)}},[a]),n.React.useEffect(function(){if(!a)return;const o=setInterval(function(){return h(Date.now())},1e3);return function(){return clearInterval(o)}},[a]),!a)return n.React.createElement(g,{style:{color:"red",backgroundColor:"yellow"}}," VT: Idle ");const s=Math.floor((f-a)/1e3),C=Math.floor(s/60),t=s%60;return n.React.createElement(g,{style:{color:"#fff",fontSize:14,marginLeft:8,opacity:.9,backgroundColor:"rgba(0, 0, 0, 0.3)",paddingHorizontal:6,paddingVertical:2,borderRadius:4,overflow:"hidden"}},`${C}:${t<10?"0":""}${t}`)};var V={onLoad(){try{r.showToast("VoiceTime: Plugin loading v4..."),i=[];const e=function(s){return function(C,t){if(!t)return console.log(`VoiceTime: ${s} res is null`),t;t.props||(t.props={});const o=Array.isArray(t.props.children)?[...t.props.children]:t.props.children?[t.props.children]:[];return o.push(n.React.createElement(w,{style:{flexDirection:"row",alignItems:"center",zIndex:999,backgroundColor:"blue",padding:5}},n.React.createElement(g,{style:{color:"white"}},`[${s}]`),n.React.createElement(H))),t.props.children=o,t}},c=d.findByName("ChannelHeader",!1),a=d.findByProps("ChannelHeader"),u=d.findByDisplayName("ChannelHeader",!1);c?.default?(i.push(l.after("default",c,e("ChannelHeader(default)"))),r.showToast("Patched ChannelHeader(default)")):a?.ChannelHeader?(i.push(l.after("ChannelHeader",a,e("ChannelHeader(named)"))),r.showToast("Patched ChannelHeader(named)")):u&&(i.push(l.after("default",u,e("ChannelHeader(display)"))),r.showToast("Patched ChannelHeader(display)"));const f=d.findByName("Topic",!1);f?.default&&(i.push(l.after("default",f,e("Topic"))),r.showToast("Patched Topic"));const h=d.findByName("Header",!1);h?.default&&(i.push(l.after("default",h,e("Header"))),r.showToast("Patched Header"))}catch(e){console.error("VoiceTime Error:",e),r.showToast(`VoiceTime Error: ${e.message}`)}},onUnload(){i.forEach(function(e){return e()})}};return p.default=V,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.ui.toasts);
