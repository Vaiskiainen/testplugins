(function(N,Q,v,o,E,t,Z,g,I){"use strict";const q=function(e){return e?/\.(png|jpe?g|gif|webp|bmp|tiff|avif)$/i.test(e):!1},x=function(e){return{url:typeof e?.image=="string"?e.image:typeof e?.url=="string"?e.url:null}},ee=[{id:"animal-dog",name:"dog",displayName:"Dog",description:"Random dog photo",defaultApiId:"dog-ceo",apis:[{id:"dog-ceo",name:"Dog CEO",description:"dog.ceo API",endpoint:"https://dog.ceo/api/breeds/image/random",parse:function(e){return{url:typeof e?.message=="string"?e.message:null}}},{id:"random-dog",name:"Random Dog",description:"random.dog (filters non-images)",endpoint:"https://random.dog/woof.json",parse:function(e){const a=typeof e?.url=="string"?e.url:null;return{url:q(a)?a:null}}}]},{id:"animal-cat",name:"cat",displayName:"Cat",description:"Random cat photo",defaultApiId:"thecatapi",apis:[{id:"thecatapi",name:"The Cat API",description:"thecatapi.com",endpoint:"https://api.thecatapi.com/v1/images/search",parse:function(e){return{url:Array.isArray(e)&&e[0]?.url?e[0].url:null}}},{id:"cataas",name:"Cataas",description:"cataas.com",endpoint:"https://cataas.com/cat?json=true",parse:function(e){const a=typeof e?.url=="string"?e.url:null;return a?{url:a.startsWith("http")?a:`https://cataas.com${a}`}:{url:null}}}]},{id:"animal-fox",name:"fox",displayName:"Fox",description:"Random fox photo",defaultApiId:"randomfox",apis:[{id:"randomfox",name:"RandomFox",description:"randomfox.ca",endpoint:"https://randomfox.ca/floof/",parse:function(e){return{url:typeof e?.image=="string"?e.image:null}}},{id:"some-random-api",name:"Some Random API",description:"some-random-api.com (includes fact)",endpoint:"https://some-random-api.com/animal/fox",parse:function(e){return{url:typeof e?.image=="string"?e.image:null,caption:typeof e?.fact=="string"?e.fact:null}}}]},{id:"animal-duck",name:"duck",displayName:"Duck",description:"Random duck photo",defaultApiId:"random-duck-v2",apis:[{id:"random-duck-v2",name:"Random-d.uk v2",description:"random-d.uk v2 API",endpoint:"https://random-d.uk/api/v2/random",parse:function(e){return{url:typeof e?.url=="string"?e.url:null}}},{id:"random-duck-v1",name:"Random-d.uk v1",description:"random-d.uk v1 API",endpoint:"https://random-d.uk/api/random",parse:function(e){return{url:typeof e?.url=="string"?e.url:null}}}]},{id:"animal-shiba",name:"shiba",displayName:"Shiba",description:"Random shiba photo",defaultApiId:"shibe-online",apis:[{id:"shibe-online",name:"Shibe.online",description:"shibe.online API",endpoint:"https://shibe.online/api/shibes?count=1&urls=true&httpsUrls=true",parse:function(e){return{url:Array.isArray(e)&&typeof e[0]=="string"?e[0]:null}}},{id:"dog-ceo-shiba",name:"Dog CEO (Shiba)",description:"dog.ceo shiba endpoint",endpoint:"https://dog.ceo/api/breed/shiba/images/random",parse:function(e){return{url:typeof e?.message=="string"?e.message:null}}}]},{id:"animal-horse",name:"horse",displayName:"Horse",description:"Random horse photo",defaultApiId:"animals-maxz-horse",apis:[{id:"animals-maxz-horse",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/horse/random",parse:x}]},{id:"animal-deer",name:"deer",displayName:"Deer",description:"Random deer photo",defaultApiId:"animals-maxz-deer",apis:[{id:"animals-maxz-deer",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/deer/random",parse:x}]},{id:"animal-otter",name:"otter",displayName:"Otter",description:"Random otter photo",defaultApiId:"tinyfox-otter",apis:[{id:"tinyfox-otter",name:"Tinyfox",description:"api.tinyfox.dev (ott)",endpoint:"https://api.tinyfox.dev/img.json?animal=ott",parse:function(e){return{url:typeof e?.url=="string"?e.url:typeof e?.image=="string"?e.image:typeof e?.link=="string"?e.link:null}}}]},{id:"animal-bird",name:"bird",displayName:"Bird",description:"Random bird photo",defaultApiId:"animals-maxz-bird",apis:[{id:"animals-maxz-bird",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/bird/random",parse:x}]},{id:"animal-turtle",name:"turtle",displayName:"Turtle",description:"Random turtle photo",defaultApiId:"animals-maxz-turtle",apis:[{id:"animals-maxz-turtle",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/turtle/random",parse:x}]},{id:"animal-sheep",name:"sheep",displayName:"Sheep",description:"Random sheep photo",defaultApiId:"animals-maxz-sheep",apis:[{id:"animals-maxz-sheep",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/sheep/random",parse:x}]},{id:"animal-capybara",name:"capybara",displayName:"Capybara",description:"Random capybara photo",defaultApiId:"capy-lol",apis:[{id:"capy-lol",name:"Capy.lol",description:"api.capy.lol",endpoint:"https://api.capy.lol/v1/capybara?json=true",parse:function(e){return{url:typeof e?.url=="string"?e.url:typeof e?.image=="string"?e.image:typeof e?.link=="string"?e.link:null}}},{id:"animals-maxz-capybara",name:"Animals Maxz",description:"animals.maxz.dev",endpoint:"https://animals.maxz.dev/api/capybara/random",parse:x}]},{id:"animal-dinosaur",name:"dinosaur",displayName:"Dinosaur",description:"Secret dino \u2014 unlocked via hidden settings",defaultApiId:"commons-triceratops",isSecret:!0,apis:[{id:"commons-triceratops",name:"Wikimedia Commons (CC0)",description:"A cool dino :3",directUrl:"https://static01.nyt.com/images/2025/06/09/multimedia/09HS-tb-dinosaur-01-fvzp/09HS-tb-dinosaur-01-fvzp-videoSixteenByNine3000.jpg"}]}],te=function(e){const a=e?.hiddenSettings;return Boolean(a?.enabled)&&a?.visible!==!1},S=function(e){return ee.filter(function(a){return!a.isSecret||te(e)})},z=function(e){e.apiChoice??={};for(const a of S(e)){const n=e.apiChoice[a.id];a.apis.some(function(i){return i.id===n})||(e.apiChoice[a.id]=a.defaultApiId||a.apis[0]?.id)}},k=function(e){e.commandEnabled??={};for(const a of S(e))typeof e.commandEnabled[a.id]!="boolean"&&(e.commandEnabled[a.id]=!0)},D=function(e,a){return e?.commandEnabled?.[a.id]!==!1},$=function(e,a){const n=e?.apiChoice?.[a.id];return a.apis.find(function(i){return i.id===n})||a.apis[0]};function ae(){const[e,a]=t.React.useState(0),[n,i]=t.React.useState(null),[s,m]=t.React.useState(null),[d,u]=t.React.useState(!1),c=v.findByProps("getUser","getCurrentUser")?.getCurrentUser?.(),{getUserAvatarURL:b}=v.findByProps("getUserAvatarURL")||{},{getDefaultAvatarURL:w}=v.findByProps("getDefaultAvatarURL")||{},f=t.stylesheet.createThemedStyleSheet({container:{flexDirection:"row",alignItems:"center",paddingVertical:24,paddingHorizontal:16,width:"100%",justifyContent:"center"},leftSection:{flexDirection:"row",alignItems:"center",flex:1,gap:20,maxWidth:500},avatarContainer:{position:"relative",width:96,height:96,justifyContent:"center",alignItems:"center"},avatarWrapper:{width:96,height:96,borderRadius:24,backgroundColor:g.semanticColors.BACKGROUND_SECONDARY,justifyContent:"center",alignItems:"center",overflow:"hidden",borderWidth:2,borderColor:g.semanticColors.BACKGROUND_TERTIARY},avatar:{width:92,height:92,borderRadius:22},textContainer:{flex:1,marginLeft:4,justifyContent:"center"},title:{fontSize:22,fontWeight:"700",color:g.semanticColors.TEXT_DEFAULT},subtitle:{marginTop:4,fontSize:14,fontWeight:"600",color:g.semanticColors.TEXT_MUTED},animatedIndicator:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:10,width:20,height:20,justifyContent:"center",alignItems:"center",zIndex:1},gifText:{color:"#FFFFFF",fontSize:10,fontWeight:"bold"},avatarPlaceholder:{width:48,height:48,tintColor:g.semanticColors.INTERACTIVE_NORMAL}});t.React.useEffect(function(){if(c){let h,R=!1;const r=c.avatar?.startsWith("a_");if(b&&c.avatar)h=b(c,r),R=r;else if(w)h=w(c);else if(c.avatar){const l=c.avatar.startsWith("a_");h=`https://cdn.discordapp.com/avatars/${c.id}/${c.avatar}.${l?"gif":"png"}?size=256`,R=l}else h=`https://cdn.discordapp.com/embed/avatars/${c.discriminator?parseInt(c.discriminator)%5:(parseInt(c.id)>>22)%6}.png`;m(h),u(R)}},[c]);const W=function(){if(o.storage.hiddenSettings?.enabled){o.storage.hiddenSettings.visible=!o.storage.hiddenSettings.visible,E.showToast(`Hidden settings ${o.storage.hiddenSettings.visible?"visible":"hidden"}`,I.getAssetIDByName("SettingsIcon"));const l=globalThis.__animalCommandsRefreshSettings;typeof l=="function"&&l();return}n&&clearTimeout(n);const h=setTimeout(function(){a(0)},1e3);i(h);const R=e+1;if(a(R),R<10)return;E.showToast("Hidden settings unlocked!",I.getAssetIDByName("CheckmarkIcon")),o.storage.hiddenSettings={...o.storage.hiddenSettings,enabled:!0,visible:!0};const r=globalThis.__animalCommandsRefreshSettings;typeof r=="function"&&r(),a(0)};return t.React.createElement(t.ReactNative.View,{style:f.container},t.React.createElement(t.ReactNative.View,{style:f.leftSection},t.React.createElement(t.ReactNative.Pressable,{style:f.avatarContainer,onPress:W},t.React.createElement(t.ReactNative.View,{style:f.avatarWrapper},s?t.React.createElement(t.React.Fragment,null,t.React.createElement(t.ReactNative.Image,{source:{uri:s},style:f.avatar,resizeMode:"cover"}),d&&t.React.createElement(t.ReactNative.View,{style:f.animatedIndicator},t.React.createElement(t.ReactNative.Text,{style:f.gifText},"GIF"))):t.React.createElement(t.ReactNative.Image,{source:I.getAssetIDByName("ic_account_circle_24px"),style:f.avatarPlaceholder}))),t.React.createElement(t.ReactNative.View,{style:f.textContainer},t.React.createElement(t.ReactNative.Text,{style:f.title},"Commands"),t.React.createElement(t.ReactNative.Text,{style:f.subtitle},"Cool animal images with slash commands"))))}function T({title:e,icon:a,children:n,padding:i=!1}){const s=t.stylesheet.createThemedStyleSheet({main:{backgroundColor:g.rawColors.PLUM_18,borderColor:g.semanticColors.CARD_BACKGROUND_DEFAULT,borderWidth:1,borderRadius:16,overflow:"hidden",flex:1,maxWidth:"100%"},titleContainer:{marginBottom:8,marginHorizontal:16,marginTop:8,gap:4,flexDirection:"row",alignItems:"center"},icon:{width:16,height:16,marginTop:1.5,tintColor:g.semanticColors.TEXT_MUTED},titleText:{fontSize:14,fontWeight:"600",color:g.semanticColors.TEXT_MUTED},wrapper:{marginHorizontal:16,marginTop:16,maxWidth:"100%"}});return t.React.createElement(t.ReactNative.View,{style:s.wrapper},e&&t.React.createElement(t.ReactNative.View,{style:s.titleContainer},a&&t.React.createElement(t.ReactNative.Image,{style:s.icon,source:a,resizeMode:"cover"}),t.React.createElement(t.ReactNative.Text,{style:s.titleText},e.toUpperCase())),t.React.createElement(t.ReactNative.View,{style:s.main},i?t.React.createElement(t.ReactNative.View,{style:{paddingHorizontal:16,paddingVertical:16}},n):n))}const{ScrollView:ne,View:M,Text:U,Animated:P,Easing:H}=t.ReactNative,ie=Z.Forms||v.findByProps("FormSection","FormRow","FormText","FormRadioRow","FormCheckRow")||{},{FormRow:_,FormText:re,FormRadioRow:se,FormCheckRow:oe}=ie,O=re??U,X=se??oe??null,A=_?.Icon,y=function(...e){for(const a of e){const n=I.getAssetIDByName(a);if(n)return n}},F=y("ic_image","ic_image_24px","ic_photo_24px","ic_gallery_24px","ic_add_photo_24px"),B=y("ic_arrow_right","ic_chevron_right_24px","ic_arrow_forward_24px"),V=y("back-icon","ic_arrow_back_24px","ic_chevron_left_24px"),j=function(){if(F)return A?t.React.createElement(A,{source:F}):t.React.createElement(t.ReactNative.Image,{source:F,style:{width:20,height:20,tintColor:g.semanticColors.TEXT_MUTED}})},ce=function(){if(B)return A?t.React.createElement(A,{source:B}):t.React.createElement(t.ReactNative.Image,{source:B,style:{width:20,height:20,tintColor:g.semanticColors.TEXT_MUTED}})},le=function(){if(V)return A?t.React.createElement(A,{source:V}):t.React.createElement(t.ReactNative.Image,{source:V,style:{width:20,height:20,tintColor:g.semanticColors.TEXT_MUTED}})};function de(){t.React.useEffect(function(){z(o.storage),k(o.storage)},[]);const[e,a]=t.React.useState(null),[n,i]=t.React.useState(null),[s,m]=t.React.useState(0),d=t.React.useRef(new P.Value(0)).current,u=t.React.useRef(null),[,c]=t.React.useReducer(function(r){return r+1},0),b=S(o.storage);t.React.useEffect(function(){return globalThis.__animalCommandsRefreshSettings=function(){z(o.storage),k(o.storage),c();const r=globalThis.__animalCommandsReload;typeof r=="function"&&r()},function(){try{delete globalThis.__animalCommandsRefreshSettings}catch{}}},[]);const w=function(r,l){o.storage.apiChoice={...o.storage.apiChoice??{},[r]:l},c()},f=function(r,l){o.storage.commandEnabled={...o.storage.commandEnabled??{},[r]:l},c();const C=globalThis.__animalCommandsReload;typeof C=="function"&&C()};if(t.React.useEffect(function(){e&&i(e),P.timing(d,{toValue:e?1:0,duration:220,easing:H.out(H.cubic),useNativeDriver:!0}).start(function({finished:r}){r&&!e&&i(null)})},[e,d]),t.React.useEffect(function(){e&&!b.some(function(r){return r.id===e})&&a(null)},[e,b]),t.React.useEffect(function(){try{u.current?.scrollTo?.({y:0,animated:!1})}catch{}},[e]),!_)return t.React.createElement(M,{style:{flex:1,padding:16,justifyContent:"center",alignItems:"center"}},t.React.createElement(U,{style:{fontSize:18,fontWeight:"600",textAlign:"center"}},"Failed to load native settings UI"),t.React.createElement(U,{style:{marginTop:6,fontSize:15,textAlign:"center"}},"Update your Revenge/Vendetta build and try again."));const W=function(){return t.React.createElement(t.React.Fragment,null,t.React.createElement(ae,null),t.React.createElement(T,{title:"Animals",icon:y("SendMessageIcon","ic_pets_24px","ic_account_circle_24px")},b.map(function(r){const l=$(o.storage,r),C=D(o.storage,r);return t.React.createElement(_,{key:r.id,label:r.displayName,subLabel:`API: ${l.name}`,leading:j(),trailing:t.React.createElement(t.ReactNative.View,{style:{flexDirection:"row",alignItems:"center"}},t.React.createElement(t.ReactNative.Switch,{value:C,onValueChange:function(p){return f(r.id,p)}}),t.React.createElement(t.ReactNative.View,{style:{marginLeft:6}},ce())),onPress:function(){return a(r.id)}})})),t.React.createElement(T,{title:"Note",icon:y("ic_info_24px","SettingsIcon"),padding:!0},t.React.createElement(O,null,'Found a bug or want an animal added? DM "@vaiskiainen."')))},h=function(){const r=n??e,l=b.find(function(p){return p.id===r});if(!l)return null;const C=o.storage.apiChoice?.[l.id]??l.defaultApiId;return t.React.createElement(t.React.Fragment,null,t.React.createElement(T,{title:l.displayName,icon:y("ic_pets_24px","ic_account_circle_24px"),padding:!0},l.description?t.React.createElement(O,null,l.description):null),t.React.createElement(T,{title:"Choose API",icon:y("SettingsIcon","ic_settings_24px")},l.apis.map(function(p){const J=p.id===C;if(X)return t.React.createElement(X,{key:p.id,label:p.name,subLabel:p.description,selected:J,leading:j(),onPress:function(){return w(l.id,p.id)}});const Re=J?`Selected \xB7 ${p.description}`:p.description;return t.React.createElement(_,{key:p.id,label:p.name,subLabel:Re,leading:j(),onPress:function(){return w(l.id,p.id)}})})),t.React.createElement(T,{title:"Navigation",icon:y("ic_keyboard_arrow_left_24px","XIcon")},t.React.createElement(_,{label:"Back to animals",leading:le(),onPress:function(){return a(null)}})))},R=s>0?d.interpolate({inputRange:[0,1],outputRange:[0,-s]}):0;return t.React.createElement(M,{style:{flex:1},onLayout:function(r){return m(r.nativeEvent.layout.width)}},t.React.createElement(ne,{ref:u,style:{flex:1},scrollEnabled:!0},t.React.createElement(P.View,{style:{flexDirection:"row",width:s>0?s*2:"200%",transform:[{translateX:R}]}},t.React.createElement(M,{style:{width:s||"100%"},pointerEvents:e?"none":"auto"},W()),t.React.createElement(M,{style:{width:s||"100%"},pointerEvents:e?"auto":"none"},h()))))}const ue={CHAT:1},pe={BUILT_IN:1},fe=function(){const e=globalThis;if(e?.MessageActions&&typeof e.MessageActions=="object")return e.MessageActions;const a=v.findByProps("sendMessage");if(a)return a;const n=v.findByProps("sendMessage","receiveMessage");return n||v.findByProps("createMessage","getMessages")||null},ge=async function(e,a){const n=fe();if(!n)return{ok:!1};const i={content:a},s=Date.now().toString(),m=[{fn:function(){return n?.sendMessage?.(e,i)},name:"MA.sendMessage(channelId, msgObj)"},{fn:function(){return n?.sendMessage?.(e,i,!0)},name:"MA.sendMessage(channelId, msgObj, true)"},{fn:function(){return n?.sendMessage?.(e,i,void 0,{nonce:s})},name:"MA.sendMessage(channelId,msg,undefined,{nonce})"},{fn:function(){return n?.createMessage?.(e,i)},name:"MA.createMessage(channelId, msgObj)"},{fn:function(){return n?.createMessage?.(e,a)},name:"MA.createMessage(channelId, content)"},{fn:function(){return n?.createMessage?.(e,i,void 0,{nonce:s})},name:"MA.createMessage(channelId,msg,undefined,{nonce})"},{fn:function(){return n?.sendMessage?.(e,a)},name:"MA.sendMessage(channelId, content)"},{fn:function(){return n?.sendMessage?.(e,a,!0)},name:"MA.sendMessage(channelId, content, true)"},{fn:function(){return n.default?.createMessage?n.default.createMessage(e,i):void 0},name:"MA.default.createMessage"},{fn:function(){return n?.dispatch?n.dispatch({type:"CREATE_MESSAGE",channelId:e,message:i}):void 0},name:"MA.dispatch(CREATE_MESSAGE)"}];for(const d of m)try{const u=d.fn();return u&&typeof u.then=="function"&&await u,{ok:!0,method:d.name}}catch{}return{ok:!1}},me=async function(e,a=8e3){const n=new AbortController,i=setTimeout(function(){return n.abort()},a);try{const s=await fetch(e,{signal:n.signal,headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}finally{clearTimeout(i)}},he=async function(e,a=8e3){const n=new AbortController,i=setTimeout(function(){return n.abort()},a);try{const d=await fetch(e,{method:"HEAD",redirect:"follow",signal:n.signal});if(d.ok&&d.url)return d.url}catch{}finally{clearTimeout(i)}const s=new AbortController,m=setTimeout(function(){return s.abort()},a);try{const d=await fetch(e,{method:"GET",redirect:"follow",signal:s.signal});if(d.ok&&d.url)return d.url}finally{clearTimeout(m)}return e},G=async function(e,a){const n=e?.channel?.id??e?.channelId??e?.message?.channel_id;return n&&(await ge(n,a)).ok?null:{content:a}};let L=[];const K=function(){for(const e of L)e?.();L=[]},Y=function(){K(),L=S(o.storage).filter(function(e){return D(o.storage,e)}).map(function(e){return Q.registerCommand({name:e.name,description:e.description,displayName:e.displayName,displayDescription:e.description,applicationId:"-1",id:e.id,inputType:pe.BUILT_IN,type:ue.CHAT,execute:async function(a,n){try{if(!D(o.storage,e))return E.showToast("That command is disabled in settings."),null;const i=$(o.storage,e);if(i.directUrl){let u=i.directUrl;if(i.cacheBust)try{const c=new URL(u);c.searchParams.set("t",Date.now().toString()),u=c.toString()}catch(c){logWarn("directUrl:cacheBust failed",e.name,formatError(c))}if(i.resolveFinalUrl)try{u=await he(u)}catch(c){logWarn("directUrl:resolveFinalUrl failed",e.name,formatError(c))}return await G(n,u)}if(!i.endpoint||!i.parse)return E.showToast("This API is not configured correctly."),null;const s=await me(i.endpoint),m=i.parse(s);if(!m.url)return E.showToast("API returned no image. Try another source."),null;const d=`${m.caption?`${m.caption}
`:""}${m.url}`;return await G(n,d)}catch{return E.showToast("Failed to fetch animal image."),null}}})})};var ye={onLoad(){z(o.storage),k(o.storage),Y(),globalThis.__animalCommandsReload=function(){Y()}},onUnload(){K();try{delete globalThis.__animalCommandsReload}catch{}},settings:de};return N.default=ye,Object.defineProperty(N,"__esModule",{value:!0}),N})({},vendetta.commands,vendetta.metro,vendetta.plugin,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.components,vendetta.ui,vendetta.ui.assets);
