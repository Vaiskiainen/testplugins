(function(i,f,r,l,s,e,y,p,t){"use strict";const{FormSection:B,FormRow:c,FormInput:I,FormDivider:m}=y.Forms;r.findByProps("Button","ButtonColors","ButtonSizes")?.Button;const g=r.findByProps("launchImageLibrary");function S(){p.useProxy(l.storage);const[n,o]=t.React.useState(l.storage.splashURL||""),u=function(){l.storage.splashURL=n,s.showToast("Splash URL saved",e.getAssetIDByName("Check"))},d=async function(){if(!g){s.showToast("ImagePicker not found",e.getAssetIDByName("Small"));return}try{g.launchImageLibrary({mediaType:"photo",includeBase64:!1},function(a){if(!a.didCancel){if(a.errorCode){s.showToast("Error picking image",e.getAssetIDByName("Small"));return}a.assets&&a.assets.length>0&&o(a.assets[0].uri)}})}catch(a){console.error(a),s.showToast("Failed to open picker",e.getAssetIDByName("Small"))}};return t.React.createElement(B,{title:"Configuration"},t.React.createElement(I,{title:"Custom Splash Image URL",placeholder:"https://example.com/image.png",value:n,onChange:o}),t.React.createElement(m,null),t.React.createElement(c,{label:"Select from Gallery",leading:t.React.createElement(c.Icon,{source:e.getAssetIDByName("ic_image")}),onPress:d}),t.React.createElement(m,null),t.React.createElement(c,{label:"Save",leading:t.React.createElement(c.Icon,{source:e.getAssetIDByName("ic_save")}),onPress:u}))}let h;var A={onLoad:function(){const n=r.findByProps("getAssetIDByName")||r.findByProps("registerAsset")||r.findByProps("getAssetById");if(!n){console.error("CustomSplash: AssetModule not found"),s.showToast("CustomSplash: AssetModule not found",e.getAssetIDByName("Small"));return}let o="getAssetIDByName";if(!n[o])if(n.getAssetIdByName)o="getAssetIdByName";else{s.showToast(`CustomSplash: ${o} not found on module`,e.getAssetIDByName("Small"));return}const u=["logo","LaunchScreen","Splash","SimpleSplash"];h=f.patcher.after(o,n,function([d],a){return l.storage.splashURL&&u.includes(d)?{uri:l.storage.splashURL}:a}),s.showToast("CustomSplash: Patched asset system",e.getAssetIDByName("Check"))},onUnload:function(){h?.()},settings:S};return i.default=A,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta,vendetta.metro,vendetta.plugin,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.components,vendetta.storage,vendetta.metro.common);
