(function(h,B,d,p,c,s,R,v,a){"use strict";const{FormSection:I,FormRow:f,FormInput:L,FormDivider:g}=R.Forms;d.findByProps("Button","ButtonColors","ButtonSizes")?.Button;const y=d.findByProps("launchImageLibrary");function C(){v.useProxy(p.storage);const[t,n]=a.React.useState(p.storage.splashURL||""),o=function(){p.storage.splashURL=t,c.showToast("Splash URL saved",s.getAssetIDByName("Check"))},i=async function(){if(!y){c.showToast("ImagePicker not found",s.getAssetIDByName("Small"));return}try{y.launchImageLibrary({mediaType:"photo",includeBase64:!1},function(r){if(!r.didCancel){if(r.errorCode){c.showToast("Error picking image",s.getAssetIDByName("Small"));return}r.assets&&r.assets.length>0&&n(r.assets[0].uri)}})}catch(r){console.error(r),c.showToast("Failed to open picker",s.getAssetIDByName("Small"))}};return a.React.createElement(I,{title:"Configuration"},a.React.createElement(L,{title:"Custom Splash Image URL",placeholder:"https://example.com/image.png",value:t,onChange:n}),a.React.createElement(g,null),a.React.createElement(f,{label:"Select from Gallery",leading:a.React.createElement(f.Icon,{source:s.getAssetIDByName("ic_image")}),onPress:i}),a.React.createElement(g,null),a.React.createElement(f,{label:"Save",leading:a.React.createElement(f.Icon,{source:s.getAssetIDByName("ic_save")}),onPress:o}))}let S;function m(t){if(!t||!t.props)return!1;let n=!1;if(t.props.source&&(t.props.source={uri:p.storage.splashURL},t.props.resizeMode="contain",n=!0),t.props.children)if(Array.isArray(t.props.children))for(const o of t.props.children)m(o)&&(n=!0);else m(t.props.children)&&(n=!0);return n}var b={onLoad:function(){const t=["LaunchScreen","Splash","SimpleSplash","Loading","Launch"];let n=null,o="default",i="";for(const u of t){const e=d.findByDisplayName(u);if(e)if(e.prototype&&e.prototype.render){n=e.prototype,o="render",i=u;break}else typeof e=="function"&&console.log(`Found functional component ${u}, but cannot patch directly without module.`)}if(!n){const u=["LaunchScreen","Splash"];for(const e of u){const l=d.findByProps(e);if(l){if(l[e]){n=l,o=e,i=e;break}else if(l.default){n=l,o="default",i=e;break}}}}if(!n){console.error("CustomSplash: No suitable splash component found"),c.showToast("CustomSplash: Could not find splash component",s.getAssetIDByName("Small"));return}c.showToast(`Patching ${i} (${o})`,s.getAssetIDByName("Check"));const r=function(u,e){if(!p.storage.splashURL)return e;try{m(e)}catch(l){console.error("CustomSplash: Failed to replace image",l)}return e};S=B.patcher.after(o,n,r)},onUnload:function(){S?.()},settings:C};return h.default=b,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta,vendetta.metro,vendetta.plugin,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.components,vendetta.storage,vendetta.metro.common);
