(function(u,i,r,e,f,h){"use strict";const{ScrollView:R}=h.General,{FormRow:c,FormSwitch:g,FormDivider:m,FormSection:b,FormIcon:v,FormInput:p}=h.Forms,d=function(){return vendetta.plugin.reloadPlugin?.("RemoveBanner")},y=function(){return f.useProxy(e.storage),React.createElement(R,null,React.createElement(b,{title:"RemoveBanner"},React.createElement(c,{label:"Remove server banners",subLabel:"Hides banners from header, list and popouts",leading:React.createElement(v,{style:{opacity:.8},source:r.getAssetIDByName("ic_image")}),trailing:React.createElement(g,{value:e.storage.removeBanner,onValueChange:function(n){e.storage.removeBanner=n,d()}})}),React.createElement(m,null),React.createElement(c,{label:"Also remove splash images",subLabel:"Invite screen & discovery background",leading:React.createElement(v,{style:{opacity:.8},source:r.getAssetIDByName("ic_invite")}),trailing:React.createElement(g,{value:e.storage.removeSplash,onValueChange:function(n){e.storage.removeSplash=n,d()}})}),React.createElement(m,null),React.createElement(c,{label:"Aggressive mode",subLabel:"Nukes banners from absolutely everywhere",leading:React.createElement(v,{style:{opacity:.8},source:r.getAssetIDByName("ic_warning")}),trailing:React.createElement(g,{value:e.storage.aggressiveMode,onValueChange:function(n){e.storage.aggressiveMode=n,d()}})}),React.createElement(m,null),React.createElement(c,{label:"Whitelisted servers",subLabel:"Comma-separated guild IDs where banners/splashes should show"}),React.createElement(p,{value:e.storage.whitelist.join(", "),onChange:function(n){e.storage.whitelist=n.split(",").map(function(a){return a.trim()}).filter(Boolean),d()},placeholder:"e.g., 1234567890, 0987654321"})))};e.storage.removeBanner??=!0,e.storage.removeSplash??=!1,e.storage.aggressiveMode??=!0,e.storage.whitelist??=[];let o=[];var B={onLoad(){const n=function(){return o.forEach(function(a){return a&&a()})};(function(){if(n(),o=[],[r.findByProps("getGuild"),r.findByStoreName("GuildCacheStore"),r.findByStoreName("GuildStore")].filter(Boolean).forEach(function(a){a.getGuild&&o.push(i.instead("getGuild",a,function(s,l){const t=l(...s);return t&&e.storage.removeBanner&&!e.storage.whitelist.includes(t.id)&&(t.banner=t.bannerId=null),t&&e.storage.removeSplash&&!e.storage.whitelist.includes(t.id)&&(t.splash=null),t}))}),[r.findByProps("getGuildBannerURL"),r.findByProps("getGuildSplashURL")].filter(Boolean).forEach(function(a){e.storage.removeBanner&&a.getGuildBannerURL&&o.push(i.instead("getGuildBannerURL",a,function(s,l){const t=s[0];return t&&e.storage.whitelist.includes(t.id)?l(...s):null})),e.storage.removeSplash&&a.getGuildSplashURL&&o.push(i.instead("getGuildSplashURL",a,function(s,l){const t=s[0];return t&&e.storage.whitelist.includes(t.id)?l(...s):null}))}),e.storage.aggressiveMode){const a=r.findByProps("GuildHeader")?.GuildHeader||r.findByDisplayName("GuildHeader",!1);a?.prototype?.render&&o.push(i.instead("render",a.prototype,function(s,l){const t=l(...s);return t?.props&&t.props.guild&&!e.storage.whitelist.includes(t.props.guild.id)&&(t.props.banner=t.props.bannerSource=null,t.props.guild.banner=null),t}))}})()},onUnload(){o.forEach(function(n){return n&&n()})},settings:y};return u.default=B,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components);
