(function(u,i,o,e,R,f,g){"use strict";const{ScrollView:b}=f.General,{FormRow:c,FormSwitch:m,FormDivider:v,FormSection:p,FormIcon:h,FormInput:y}=f.Forms,d=function(){return vendetta.plugin.reloadPlugin?.("RemoveBanner")},B=function(){return R.useProxy(e.storage),React.createElement(b,null,React.createElement(p,{title:"RemoveBanner"},React.createElement(c,{label:"Remove server banners",subLabel:"Hides banners from header, list and popouts",leading:React.createElement(h,{style:{opacity:.8},source:g.getAssetIDByName("ic_image")}),trailing:React.createElement(m,{value:e.storage.removeBanner,onValueChange:function(n){e.storage.removeBanner=n,d()}})}),React.createElement(v,null),React.createElement(c,{label:"Also remove splash images",subLabel:"Invite screen & discovery background",leading:React.createElement(h,{style:{opacity:.8},source:g.getAssetIDByName("ic_invite")}),trailing:React.createElement(m,{value:e.storage.removeSplash,onValueChange:function(n){e.storage.removeSplash=n,d()}})}),React.createElement(v,null),React.createElement(c,{label:"Aggressive mode",subLabel:"Nukes banners from absolutely everywhere",leading:React.createElement(h,{style:{opacity:.8},source:g.getAssetIDByName("ic_warning")}),trailing:React.createElement(m,{value:e.storage.aggressiveMode,onValueChange:function(n){e.storage.aggressiveMode=n,d()}})}),React.createElement(v,null),React.createElement(c,{label:"Whitelisted servers",subLabel:"Comma-separated guild IDs where banners/splashes should show"}),React.createElement(y,{value:e.storage.whitelist.join(", "),onChange:function(n){e.storage.whitelist=n.split(",").map(function(a){return a.trim()}).filter(Boolean),d()},placeholder:"e.g., 1234567890, 0987654321"})))};e.storage.removeBanner??=!0,e.storage.removeSplash??=!1,e.storage.aggressiveMode??=!0,e.storage.whitelist??=[];let s=[];var E={onLoad(){const n=function(){return s.forEach(function(a){return a&&a()})};(function(){if(n(),s=[],[o.findByProps("getGuild"),o.findByStoreName("GuildCacheStore"),o.findByStoreName("GuildStore")].filter(Boolean).forEach(function(a){a.getGuild&&s.push(i.instead("getGuild",a,function(r,l){const t=l(...r);return t&&e.storage.removeBanner&&!e.storage.whitelist.includes(t.id)&&(t.banner=t.bannerId=null),t&&e.storage.removeSplash&&!e.storage.whitelist.includes(t.id)&&(t.splash=null),t}))}),[o.findByProps("getGuildBannerURL"),o.findByProps("getGuildSplashURL")].filter(Boolean).forEach(function(a){e.storage.removeBanner&&a.getGuildBannerURL&&s.push(i.instead("getGuildBannerURL",a,function(r,l){const t=r[0];return t&&e.storage.whitelist.includes(t.id)?l(...r):null})),e.storage.removeSplash&&a.getGuildSplashURL&&s.push(i.instead("getGuildSplashURL",a,function(r,l){const t=r[0];return t&&e.storage.whitelist.includes(t.id)?l(...r):null}))}),e.storage.aggressiveMode){const a=o.findByProps("GuildHeader")?.GuildHeader||o.findByDisplayName("GuildHeader",!1);a?.prototype?.render&&s.push(i.instead("render",a.prototype,function(r,l){const t=l(...r);return t?.props&&t.props.guild&&!e.storage.whitelist.includes(t.props.guild.id)&&(t.props.banner=t.props.bannerSource=null,t.props.guild.banner=null),t}))}})()},onUnload(){s.forEach(function(n){return n&&n()})},settings:B};return u.default=E,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.ui.assets);
