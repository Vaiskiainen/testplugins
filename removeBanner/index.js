(function(f,d,o,t,y){"use strict";const{FormText:B}=y.Forms;function v(){return React.createElement(B,null,"Coming soon!")}t.storage.removeBanner??=!0,t.storage.removeSplash??=!1,t.storage.aggressiveMode??=!0,t.storage.whitelist??=[];let a=[];const h=function(n){if(!n||typeof n!="object")return n;const u=Object.create(Object.getPrototypeOf(n));return Object.assign(u,n),u},G=o.findByProps("dispatch","subscribe"),S=function(){try{G.dispatch({type:"GUILD_SYNC"})}catch{}},p=function(){try{const n=o.findByProps("fetchGuild","fetchGuilds","fetchGuildPreview"),u=o.findByStoreName("GuildStore")||o.findByStoreName("GuildCacheStore"),r=(u?.getGuilds?.()||u?.guilds||{})??{},i=Object.keys(r);if(!i.length)return;i.forEach(function(e){try{n?.fetchGuild?n.fetchGuild(e):n?.fetchGuilds?n.fetchGuilds([e]):n?.fetchGuildPreview&&n.fetchGuildPreview(e)}catch{}}),Object.values(r).forEach(function(e){G.dispatch({type:"GUILD_UPDATE",guild:{...e}})}),S()}catch{}};var b={onLoad(){const n=function(){return a.forEach(function(u){return u?.()})};(function(){n(),a=[],[o.findByProps("getGuild"),o.findByStoreName("GuildCacheStore"),o.findByStoreName("GuildStore")].filter(Boolean).forEach(function(r){r.getGuild&&a.push(d.after("getGuild",r,function(i,e){if(!e)return e;const s=e.id,c=t.storage.removeBanner&&!t.storage.whitelist.includes(s),g=t.storage.removeSplash&&!t.storage.whitelist.includes(s);if(!c&&!g)return e;const l=h(e);return c&&(l.banner=null,l.bannerId=null),g&&(l.splash=null),l}))}),[o.findByProps("getGuildBannerURL"),o.findByProps("getGuildSplashURL")].filter(Boolean).forEach(function(r){r.getGuildBannerURL&&a.push(d.after("getGuildBannerURL",r,function(i,e){const s=i[0];return!t.storage.removeBanner||s&&t.storage.whitelist.includes(s.id)?e:null})),r.getGuildSplashURL&&a.push(d.after("getGuildSplashURL",r,function(i,e){const s=i[0];return!t.storage.removeSplash||s&&t.storage.whitelist.includes(s.id)?e:null}))});const u=o.findByProps("useGuildBanner");if(u?.useGuildBanner&&a.push(d.after("useGuildBanner",u,function(r,i){const e=r[0];return!e||t.storage.whitelist.includes(e.id)?i:t.storage.removeBanner?null:i})),t.storage.aggressiveMode){const r=o.findByProps("GuildHeader")?.GuildHeader||o.findByDisplayName("GuildHeader",!1);r?.prototype?.render&&a.push(d.after("render",r.prototype,function(i,e){const s=e?.props?.guild;if(!s||t.storage.whitelist.includes(s.id))return e;const c={...e,props:{...e.props}};return c.props.guild=h(s),c.props.banner=null,c.props.bannerSource=null,c.props.guild.banner=null,c}))}})();try{p()}catch{}},onUnload(){a.forEach(function(n){return n?.()});try{p()}catch{}},settings:v};return f.default=b,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.ui.components);
