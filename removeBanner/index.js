(function(G,l,o,n,g){"use strict";const{FormText:v}=g.Forms;function S(){return React.createElement(v,null,"Coming soon!")}n.storage.removeBanner??=!0,n.storage.removeSplash??=!1,n.storage.aggressiveMode??=!0,n.storage.whitelist??=[];let a=[];const p=function(i){if(!i||typeof i!="object")return i;const u=Object.create(Object.getPrototypeOf(i));return Object.assign(u,i),u},f=o.findByProps("dispatch","subscribe"),b=function(){try{f.dispatch({type:"GUILD_SYNC"}),f.dispatch({type:"GUILD_MEMBER_LIST_UPDATE",guildId:null}),f.dispatch({type:"GUILD_STREAM_UPDATE"})}catch{}},B=function(){try{const i=o.findByProps("fetchGuild","fetchGuilds","fetchGuildPreview"),u=o.findByStoreName("GuildStore")||o.findByStoreName("GuildCacheStore"),c=(u?.getGuilds?.()||u?.guilds||{})??{},r=Object.keys(c);if(!r.length)return;r.forEach(function(e){try{i?.fetchGuild?i.fetchGuild(e):i?.fetchGuilds?i.fetchGuilds([e]):i?.fetchGuildPreview&&i.fetchGuildPreview(e)}catch{}}),Object.values(c).forEach(function(e){f.dispatch({type:"GUILD_UPDATE",guild:{...e}})}),b()}catch{}};var P={onLoad(){const i=function(){return a.forEach(function(u){return u?.()})};(function(){i(),a=[],[o.findByProps("getGuild"),o.findByStoreName("GuildCacheStore"),o.findByStoreName("GuildStore")].filter(Boolean).forEach(function(r){r.getGuild&&a.push(l.after("getGuild",r,function(e,t){if(!t)return t;const s=t.id,d=n.storage.removeBanner&&!n.storage.whitelist.includes(s),y=n.storage.removeSplash&&!n.storage.whitelist.includes(s);if(!d&&!y)return t;const h=p(t);return d&&(h.banner=null,h.bannerId=null),y&&(h.splash=null),h}))}),[o.findByProps("getGuildBannerURL"),o.findByProps("getGuildSplashURL")].filter(Boolean).forEach(function(r){r.getGuildBannerURL&&a.push(l.after("getGuildBannerURL",r,function(e,t){const s=e[0];return!n.storage.removeBanner||s&&n.storage.whitelist.includes(s.id)?t:null})),r.getGuildSplashURL&&a.push(l.after("getGuildSplashURL",r,function(e,t){const s=e[0];return!n.storage.removeSplash||s&&n.storage.whitelist.includes(s.id)?t:null}))});const u=o.findByProps("useGuild","useGuildBanner","useGuildSplash");u?.useGuild&&a.push(l.after("useGuild",u,function(r,e){if(!e)return e;const t=r[0]?.id??e.id;if(!t||n.storage.whitelist.includes(t))return e;const s=p(e);return n.storage.removeBanner&&(s.banner=null,s.bannerId=null),n.storage.removeSplash&&(s.splash=null),s})),u?.useGuildBanner&&a.push(l.after("useGuildBanner",u,function(r,e){const t=r[0];return!t||n.storage.whitelist.includes(t.id)?e:n.storage.removeBanner?null:e})),u?.useGuildSplash&&a.push(l.after("useGuildSplash",u,function(r,e){const t=r[0];return!t||n.storage.whitelist.includes(t.id)?e:n.storage.removeSplash?null:e}));const c=o.findByProps("useGuildBanner");if(c?.useGuildBanner&&a.push(l.after("useGuildBanner",c,function(r,e){const t=r[0];return!t||n.storage.whitelist.includes(t.id)?e:n.storage.removeBanner?null:e})),n.storage.aggressiveMode){const r=o.findByProps("GuildHeader")?.GuildHeader||o.findByDisplayName("GuildHeader",!1);r?.prototype?.render&&a.push(l.after("render",r.prototype,function(e,t){const s=t?.props?.guild;if(!s||n.storage.whitelist.includes(s.id))return t;const d={...t,props:{...t.props}};return d.props.guild=p(s),d.props.banner=null,d.props.bannerSource=null,d.props.guild.banner=null,d}))}})();try{B()}catch{}},onUnload(){a.forEach(function(i){return i?.()});try{B()}catch{}},settings:S};return G.default=P,Object.defineProperty(G,"__esModule",{value:!0}),G})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.ui.components);
